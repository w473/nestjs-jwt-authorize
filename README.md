# nestjs-keycloak-authorize
## Description
NestJS package to authorize by role from Keycloak JWT (payload). 

It is designed to work in Kubernetes cluster
with [Istio](https://istio.io/) and [Keycloak](https://www.keycloak.org/)

JWT should be generated by Keycloak

Roles are expected to be in payload of token in
```json
"realm_access": {
    "roles": [
      'ADMIN',
      'SYS'
    ]
  },

```
Decorators:
- HasRole(roles)
  - e.g @HasRole('ADMIN', 'SYS')
- IsPublic()
  - no authorization!


## Installation

```bash
$ npm i nestjs-keycloak-authorize
```

## Test

```bash
# unit tests
$ npm run test

# tests coverage
$ npm run test:cov
```
